"use strict";(self.webpackChunkprofilebook_frontend=self.webpackChunkprofilebook_frontend||[]).push([[597],{6597:(P,c,a)=>{a.r(c),a.d(c,{AdminDashboardComponent:()=>R});var m=a(177),l=a(2183),d=a(3252),e=a(4438),f=a(7945),p=a(1032),g=a(9885);function u(n,i){1&n&&(e.j41(0,"div",46),e.nrm(1,"div",47),e.j41(2,"span",48),e.EFF(3,"Loading..."),e.k0s()())}function h(n,i){1&n&&(e.j41(0,"div",49),e.nrm(1,"i",50),e.j41(2,"p",25),e.EFF(3,"No pending posts"),e.k0s()())}function v(n,i){if(1&n&&(e.j41(0,"div",51)(1,"div",52),e.nrm(2,"img",53),e.j41(3,"div",54)(4,"h6",55),e.EFF(5),e.k0s(),e.j41(6,"p",56),e.EFF(7),e.k0s(),e.j41(8,"small",10),e.EFF(9),e.k0s()()()()),2&n){const t=i.$implicit,s=e.XpG();e.R7$(2),e.Y8G("src",s.getPostUserAvatar(t),e.B4B),e.R7$(3),e.JRh(t.userFullName),e.R7$(2),e.JRh(t.content),e.R7$(2),e.JRh(s.formatDate(t.createdAt))}}function b(n,i){1&n&&(e.j41(0,"div",46),e.nrm(1,"div",57),e.j41(2,"span",48),e.EFF(3,"Loading..."),e.k0s()())}function _(n,i){1&n&&(e.j41(0,"div",49),e.nrm(1,"i",58),e.j41(2,"p",25),e.EFF(3,"No pending reports"),e.k0s()())}function F(n,i){if(1&n&&(e.j41(0,"div",51)(1,"div",59)(2,"div",54)(3,"h6",60),e.EFF(4),e.k0s(),e.j41(5,"p",61),e.EFF(6),e.k0s(),e.j41(7,"small",10),e.EFF(8),e.k0s()(),e.j41(9,"span",62),e.EFF(10),e.k0s()()()),2&n){const t=i.$implicit,s=e.XpG();e.R7$(4),e.JRh(t.reportedUserFullName),e.R7$(2),e.JRh(t.reason),e.R7$(2),e.SpI("by ",t.reportingUserFullName,""),e.R7$(2),e.JRh(s.getStatusText(t.status))}}function E(n,i){if(1&n){const t=e.RV6();e.j41(0,"div",63),e.nrm(1,"i",43),e.EFF(2),e.j41(3,"button",64),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.errorMessage="")}),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(2),e.SpI("",t.errorMessage," ")}}let R=(()=>{class n{constructor(t,s,r){this.adminService=t,this.postService=s,this.userService=r,this.stats={pendingPosts:0,totalUsers:0,pendingReports:0,approvedPosts:0},this.recentPosts=[],this.recentReports=[],this.isLoadingPosts=!1,this.isLoadingReports=!1,this.errorMessage=""}ngOnInit(){this.loadDashboardData()}loadDashboardData(){this.loadPendingPosts(),this.loadRecentReports(),this.loadUserStats()}loadPendingPosts(){this.isLoadingPosts=!0,this.adminService.getPendingPosts().subscribe({next:t=>{this.recentPosts=t.slice(0,5),this.stats.pendingPosts=t.length,this.isLoadingPosts=!1},error:t=>{this.isLoadingPosts=!1,console.error("Error loading pending posts:",t)}})}loadRecentReports(){this.isLoadingReports=!0,this.adminService.getReports(d.n.Pending).subscribe({next:t=>{this.recentReports=t.slice(0,5),this.stats.pendingReports=t.length,this.isLoadingReports=!1},error:t=>{this.isLoadingReports=!1,console.error("Error loading reports:",t)}})}loadUserStats(){this.adminService.getUsers(1,1).subscribe({next:t=>{this.stats.totalUsers=50,this.stats.approvedPosts=120},error:t=>{console.error("Error loading user stats:",t)}})}refreshData(){this.errorMessage="",this.loadDashboardData()}getPostUserAvatar(t){return t.userProfileImage?t.userProfileImage:"https://via.placeholder.com/32x32/3b82f6/ffffff?text="+(t.userFullName?.charAt(0)||"U")}getStatusText(t){switch(t){case d.n.Pending:return"Pending";case d.n.UnderReview:return"Under Review";case d.n.Resolved:return"Resolved";case d.n.Dismissed:return"Dismissed";default:return"Unknown"}}formatDate(t){const s=new Date(t),o=Math.floor(((new Date).getTime()-s.getTime())/6e4);return o<60?`${o}m ago`:o<1440?`${Math.floor(o/60)}h ago`:o<10080?`${Math.floor(o/1440)}d ago`:s.toLocaleDateString()}static{this.\u0275fac=function(s){return new(s||n)(e.rXU(f.z),e.rXU(p.K),e.rXU(g.D))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-admin-dashboard"]],standalone:!0,features:[e.aNF],decls:103,vars:7,consts:[[1,"container","mt-4"],[1,"row"],[1,"col-12"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"text-primary"],[1,"fas","fa-tachometer-alt","me-2"],[1,"col-md-3","mb-3"],[1,"card","text-center"],[1,"card-body"],[1,"fas","fa-file-alt","fa-3x","text-primary","mb-3"],[1,"text-muted"],["routerLink","/admin/posts",1,"btn","btn-primary"],[1,"fas","fa-eye","me-2"],[1,"fas","fa-users","fa-3x","text-success","mb-3"],["routerLink","/admin/users",1,"btn","btn-success"],[1,"fas","fa-cog","me-2"],[1,"fas","fa-flag","fa-3x","text-warning","mb-3"],["routerLink","/admin/reports",1,"btn","btn-warning"],[1,"fas","fa-search","me-2"],[1,"fas","fa-users-cog","fa-3x","text-info","mb-3"],["routerLink","/admin/groups",1,"btn","btn-info"],[1,"fas","fa-layer-group","me-2"],[1,"row","mb-4"],[1,"card"],[1,"card-header"],[1,"mb-0"],[1,"fas","fa-bolt","me-2"],[1,"col-md-3","mb-2"],["routerLink","/admin/posts",1,"btn","btn-outline-primary","w-100"],[1,"fas","fa-file-alt","me-2"],["routerLink","/admin/users",1,"btn","btn-outline-success","w-100"],[1,"fas","fa-users","me-2"],["routerLink","/admin/reports",1,"btn","btn-outline-warning","w-100"],[1,"fas","fa-flag","me-2"],[1,"btn","btn-outline-info","w-100",3,"click"],[1,"fas","fa-sync-alt","me-2"],[1,"col-md-6"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"fas","fa-clock","me-2"],["routerLink","/admin/posts",1,"btn","btn-sm","btn-outline-primary"],["class","text-center py-3",4,"ngIf"],["class","text-center py-3 text-muted",4,"ngIf"],["class","border-bottom py-2",4,"ngFor","ngForOf"],[1,"fas","fa-exclamation-triangle","me-2"],["routerLink","/admin/reports",1,"btn","btn-sm","btn-outline-warning"],["class","alert alert-danger mt-3",4,"ngIf"],[1,"text-center","py-3"],[1,"spinner-border","spinner-border-sm","text-primary"],[1,"ms-2"],[1,"text-center","py-3","text-muted"],[1,"fas","fa-check-circle","fa-2x","mb-2"],[1,"border-bottom","py-2"],[1,"d-flex","align-items-start"],["width","32","height","32","alt","User avatar",1,"rounded-circle","me-2",3,"src"],[1,"flex-grow-1","min-w-0"],[1,"mb-1","text-truncate"],[1,"mb-1","text-muted","small","text-truncate"],[1,"spinner-border","spinner-border-sm","text-warning"],[1,"fas","fa-shield-alt","fa-2x","mb-2"],[1,"d-flex","justify-content-between","align-items-start"],[1,"mb-1"],[1,"mb-1","text-muted","small"],[1,"badge","bg-warning"],[1,"alert","alert-danger","mt-3"],["type","button",1,"btn-close",3,"click"]],template:function(s,r){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),e.nrm(5,"i",5),e.EFF(6,"Admin Dashboard "),e.k0s()(),e.j41(7,"div",1)(8,"div",6)(9,"div",7)(10,"div",8),e.nrm(11,"i",9),e.j41(12,"h5"),e.EFF(13,"Post Management"),e.k0s(),e.j41(14,"p",10),e.EFF(15,"Review and approve posts"),e.k0s(),e.j41(16,"a",11),e.nrm(17,"i",12),e.EFF(18,"View Posts "),e.k0s()()()(),e.j41(19,"div",6)(20,"div",7)(21,"div",8),e.nrm(22,"i",13),e.j41(23,"h5"),e.EFF(24,"User Management"),e.k0s(),e.j41(25,"p",10),e.EFF(26,"Manage user accounts"),e.k0s(),e.j41(27,"a",14),e.nrm(28,"i",15),e.EFF(29,"Manage Users "),e.k0s()()()(),e.j41(30,"div",6)(31,"div",7)(32,"div",8),e.nrm(33,"i",16),e.j41(34,"h5"),e.EFF(35,"Report Management"),e.k0s(),e.j41(36,"p",10),e.EFF(37,"Handle user reports"),e.k0s(),e.j41(38,"a",17),e.nrm(39,"i",18),e.EFF(40,"View Reports "),e.k0s()()()(),e.j41(41,"div",6)(42,"div",7)(43,"div",8),e.nrm(44,"i",19),e.j41(45,"h5"),e.EFF(46,"Group Management"),e.k0s(),e.j41(47,"p",10),e.EFF(48,"Create and manage user groups"),e.k0s(),e.j41(49,"a",20),e.nrm(50,"i",21),e.EFF(51,"Manage Groups "),e.k0s()()()()(),e.j41(52,"div",22)(53,"div",2)(54,"div",23)(55,"div",24)(56,"h5",25),e.nrm(57,"i",26),e.EFF(58,"Quick Actions "),e.k0s()(),e.j41(59,"div",8)(60,"div",1)(61,"div",27)(62,"a",28),e.nrm(63,"i",29),e.EFF(64,"Review Posts "),e.k0s()(),e.j41(65,"div",27)(66,"a",30),e.nrm(67,"i",31),e.EFF(68,"Manage Users "),e.k0s()(),e.j41(69,"div",27)(70,"a",32),e.nrm(71,"i",33),e.EFF(72,"Handle Reports "),e.k0s()(),e.j41(73,"div",27)(74,"button",34),e.bIt("click",function(){return r.refreshData()}),e.nrm(75,"i",35),e.EFF(76,"Refresh Data "),e.k0s()()()()()()(),e.j41(77,"div",1)(78,"div",36)(79,"div",23)(80,"div",37)(81,"h5",25),e.nrm(82,"i",38),e.EFF(83,"Recent Pending Posts "),e.k0s(),e.j41(84,"a",39),e.EFF(85,"View All"),e.k0s()(),e.j41(86,"div",8),e.DNE(87,u,4,0,"div",40)(88,h,4,0,"div",41)(89,v,10,4,"div",42),e.k0s()()(),e.j41(90,"div",36)(91,"div",23)(92,"div",37)(93,"h5",25),e.nrm(94,"i",43),e.EFF(95,"Recent Reports "),e.k0s(),e.j41(96,"a",44),e.EFF(97,"View All"),e.k0s()(),e.j41(98,"div",8),e.DNE(99,b,4,0,"div",40)(100,_,4,0,"div",41)(101,F,11,4,"div",42),e.k0s()()()(),e.DNE(102,E,4,1,"div",45),e.k0s()()()),2&s&&(e.R7$(87),e.Y8G("ngIf",r.isLoadingPosts),e.R7$(),e.Y8G("ngIf",!r.isLoadingPosts&&0===r.recentPosts.length),e.R7$(),e.Y8G("ngForOf",r.recentPosts),e.R7$(10),e.Y8G("ngIf",r.isLoadingReports),e.R7$(),e.Y8G("ngIf",!r.isLoadingReports&&0===r.recentReports.length),e.R7$(),e.Y8G("ngForOf",r.recentReports),e.R7$(),e.Y8G("ngIf",r.errorMessage))},dependencies:[m.MD,m.Sq,m.bT,l.iI,l.Wk],styles:[".stat-card[_ngcontent-%COMP%]{border:none;border-radius:.75rem;transition:transform .2s ease,box-shadow .2s ease}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0003}.opacity-75[_ngcontent-%COMP%]{opacity:.75}.min-w-0[_ngcontent-%COMP%]{min-width:0}.text-truncate[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.border-bottom[_ngcontent-%COMP%]:last-child{border-bottom:none!important}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding:0 1rem}.stat-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem}.stat-card[_ngcontent-%COMP%]   .fa-2x[_ngcontent-%COMP%]{font-size:1.5em}.btn.w-100[_ngcontent-%COMP%]{margin-bottom:.5rem}}"]})}}return n})()}}]);